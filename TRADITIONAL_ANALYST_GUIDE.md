# 传统分析师使用指南

## 概述

传统分析师是基于中国传统文化理论（周易玄学、五行八卦、天干地支）的智能体，专门用于分析股票走势。它将古老的东方智慧与现代金融分析相结合，提供独特的投资视角。

## 理论基础

### 五行理论 (Five Elements)

- **木 (Wood)**: 代表生长、扩张，对应春季，适合投资成长型股票
- **火 (Fire)**: 代表热情、上升，对应夏季，适合投资科技、能源股
- **土 (Earth)**: 代表稳定、厚重，对应长夏，适合投资地产、基建股
- **金 (Metal)**: 代表收敛、收获，对应秋季，适合投资金融、贵金属股
- **水 (Water)**: 代表智慧、流动，对应冬季，适合投资科技、医药股

### 八卦理论 (Eight Trigrams)

- **乾卦 (Qian)**: 天，代表强势、领导力，适合投资龙头股
- **坤卦 (Kun)**: 地，代表包容、稳定，适合投资蓝筹股
- **震卦 (Zhen)**: 雷，代表震动、变化，适合投资周期股
- **巽卦 (Xun)**: 风，代表顺从、灵活，适合投资小盘股
- **坎卦 (Kan)**: 水，代表险阻、智慧，适合投资科技股
- **离卦 (Li)**: 火，代表光明、美丽，适合投资消费股
- **艮卦 (Gen)**: 山，代表停止、稳重，适合投资防御股
- **兑卦 (Dui)**: 泽，代表喜悦、满足，适合投资娱乐股

### 天干地支 (Heavenly Stems and Earthly Branches)

根据当前时间的天干地支组合，分析市场时机：

- **甲子、乙丑**: 适合稳健投资
- **丙寅、丁卯**: 适合积极投资
- **戊辰、己巳**: 适合观望等待
- **庚午、辛未**: 适合谨慎投资
- **壬申、癸酉**: 适合灵活操作

## 传统分析原则

1. **天人合一**: 市场走势与自然规律相呼应
2. **阴阳平衡**: 涨跌交替，物极必反
3. **时势造英雄**: 顺应大势，把握时机
4. **厚德载物**: 选择有德行的企业投资

## 功能特性

### 1. 五行分析
- 分析股票所属行业的五行属性
- 结合当前时间的五行特征
- 提供基于五行相生相克的投资建议

### 2. 八卦分析
- 根据公司特征判断对应的八卦
- 分析八卦变化对股价的影响
- 提供八卦角度的投资策略

### 3. 天干地支分析
- 计算当前时间的天干地支组合
- 分析不同组合对市场的影响
- 提供基于时间周期的投资建议

### 4. 传统预测
- 综合五行、八卦、天干地支的分析
- 提供传统角度的股价走势预测
- 给出投资时机和策略建议

### 5. 吉时建议
- 基于传统历法推荐最佳交易时间
- 考虑节气、农历等因素
- 提供具体的操作时间建议

## 使用方法

### 1. 启动系统

```bash
# 启动后端服务
python backend/main.py
```

### 2. 发送分析请求

通过WebSocket连接到 `ws://localhost:8000/ws`，发送以下JSON消息：

```json
{
  "company_name": "比亚迪"
}
```

### 3. 查看分析结果

系统将实时返回包含传统分析结果的详细报告，包括：

- 五行分析结果
- 八卦分析结果
- 天干地支分析
- 传统预测
- 吉时建议

## 工具函数

### get_traditional_calendar_info

获取传统历法信息，包括：
- 农历日期
- 节气信息
- 天干地支组合
- 五行属性
- 传统分析建议

### 使用示例

```python
from tradingagents.agents.utils.china_toolkit import ChinaToolkit

toolkit = ChinaToolkit()
calendar_info = toolkit.get_traditional_calendar_info("2024-01-15")
print(calendar_info)
```

## 分析报告示例

```
=== 传统分析结果 ===
公司: Traditional Analyst
分析类型: traditional

📊 五行分析:
比亚迪作为新能源汽车企业，属于"火"属性，代表热情、上升和创新。
当前时间五行以"水"为主，水火相克，可能面临一定挑战，但水能生木，
木又能生火，形成循环，长期看好。

☯️ 八卦分析:
比亚迪对应"离卦"，代表光明、美丽和文明。离卦为火，象征科技
创新和光明前景。当前市场环境适合离卦企业的发展。

⏰ 天干地支分析:
当前为甲子年，甲为阳木，子为水，木水相生，有利于成长型股票。
建议在子时（23:00-01:00）或午时（11:00-13:00）进行交易。

🔮 传统预测:
基于五行八卦分析，比亚迪短期可能面临调整，但长期趋势向好。
建议逢低买入，持有时间以3-6个月为宜。

📅 吉时建议:
- 最佳买入时间：农历初一、十五前后
- 最佳卖出时间：农历初七、二十三前后
- 避免交易时间：农历初九、二十四（传统忌日）
```

## 注意事项

1. **仅供参考**: 传统分析结果仅供参考，不应作为唯一的投资依据
2. **结合其他分析**: 建议结合技术分析、基本面分析等其他方法
3. **风险控制**: 传统分析不能替代风险控制措施
4. **市场变化**: 市场环境变化可能影响传统分析的准确性

## 扩展功能

### 自定义分析

可以通过修改 `traditional_analyst.py` 中的提示词来自定义分析逻辑：

```python
def get_traditional_analyst_prompt():
    return ChatPromptTemplate.from_messages([
        ("system", "你的自定义传统分析逻辑..."),
        ("user", "{input}"),
    ])
```

### 添加新的传统理论

可以在 `china_toolkit.py` 中添加新的传统分析工具：

```python
@staticmethod
@tool
def get_custom_traditional_analysis(ticker: str, date: str) -> str:
    """自定义传统分析工具"""
    # 实现你的分析逻辑
    pass
```

## 技术支持

如果在使用过程中遇到问题，请检查：

1. 依赖包是否正确安装
2. 配置文件是否正确设置
3. 网络连接是否正常
4. LLM服务是否可用

## 更新日志

- **v1.0.0**: 初始版本，支持基本的五行八卦分析
- **v1.1.0**: 添加天干地支分析功能
- **v1.2.0**: 集成传统历法工具
- **v1.3.0**: 优化分析逻辑，提高准确性 